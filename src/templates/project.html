<div class="breadcrumb">
	<a ui-sref="projects">Projects</a> &gt;
	<a ui-sref="project({ id: project.id })">{{ project.name }}</a>
</div>

<div class="options" style="float: right">
	<a ng-click="y = 'contributions'" ng-class="{ active: y === 'contributions' }">Contributions</a>
	<a ng-click="y = 'users'" ng-class="{ active: y === 'users' }">Contributors</a>
	<a ng-click="y = 'starters'" ng-class="{ active: y === 'starters' }">New Contributors</a>
</div>

<h1>{{ project.name }}</h1>

<div class="name">
	<div class="parent-icon" ng-class="project.parent.id" ng-show="project.parent" ng-attr-title="Part of the {{ project.parent.name }} project"></div>
	<br>
	{{ project.contributions | number }} contributions by {{ project.users.length | number }} contributors
	<!-- <a ui-sref="project({ id: project.id })">See more...</a> -->
</div>

<weekdaygraph data="project.weekdays" axis="i === projects.length - 1" y="y"></weekdaygraph>

<daygraph data="project.days" axis="i === projects.length - 1" y="y"></daygraph>

<effortgraph data="project.users" axis="i === projects.length - 1" y="y"></effortgraph>

<a ng-href="project.url">Website</a>

<div ng-if="project.subprojects.length > 0">
	Child projects:
	<ul>
		<li ng-repeat="child in project.subprojects">
			<a ui-sref="project({ id: child.id })">{{ child.name }}</a>
		</li>
	</ul>
</div>

<div ng-if="project.partOf">
	Part of <a ui-sref="project({ id: project.partOf.id })">{{ project.partOf.name }}</a>
</div>

<div ng-if="project.tasks.complete">
	{{ project.tasks.complete | number }}
	tasks out of
	{{ project.tasks.complete + project.tasks.incomplete | number }} completed
	({{ project.tasks.complete / (project.tasks.complete + project.tasks.incomplete) * 100 | number : 2 }}%)
</div>

<div>
	{{ project.months.length | number }}
	months of data
	({{ project.rows | number }} rows)
</div>

<div ng-if="project.contributions">
	{{ project.contributions | number }} contributions
</div>

<div ng-if="project.users">
	{{ project.users.ids + project.users.ips | number }}
	Users
</div>

<div ng-if="project.countries">
	<ul>
		<li ng-repeat="country in project.countries">
			<span ng-class="'flag-icon flag-icon-' + country.code.toLowerCase()"></span>
			{{ country.name || 'Unknown' }}: {{ country.count }}
		</li>
	</ul>
</div>

<h3>{{ month.month }}</h3>

<div ng-if="project.users">
	{{ month.users.ids + month.users.ips | number }} users ({{ month.newUsers.ids + month.newUsers.ips | number }} of whom were new)
</div>

<div ng-if="month.contributions">
	{{ month.contributions | number }} contributions
</div>

<div ng-if="month.tasks">
	{{ month.tasks | number }} tasks
</div>

<div ng-if="project.users">
	<h3>Tasks over time</h3>
	<histogram left="tasksOverTime" left-name="'Tasks'"></histogram>
</div>

<div ng-if="project.users">
	<h3>Users over time</h3>
	<histogram left="usersOverTime" left-name="'Users'" right="rowsOverTime" right-label="'Contributions'"></histogram>
</div>

<div ng-if="project.users">
	<h3>New users over time</h3>
	<histogram left="newUsersOverTime"></histogram>
</div>

<div ng-if="project.contributions">
	<h3>Contributions over time</h3>
	<histogram left="contributionsOverTime"></histogram>
</div>

<div>
	<h3>Rows over time</h3>
	<histogram left="rowsOverTime"></histogram>
</div>


<!-- 
<div ng-repeat="project in projects">
	<h3><a >{{ project.name }}</a></h3>

	<div ng-show="project.tasks.complete">
		{{ project.tasks.complete | number }}
		tasks out of
		{{ project.tasks.complete + project.tasks.incomplete | number }} completed
		({{ project.tasks.complete / (project.tasks.complete + project.tasks.incomplete) * 100 | number : 2 }}%)
	</div>

	<div>
		{{ project.months.length | number }}
		months of data
		({{ project.rows | number }} rows)
	</div>

	<div>
		{{ project.users.ids + project.users.ips | number }}
		Users
	</div>

</div> -->